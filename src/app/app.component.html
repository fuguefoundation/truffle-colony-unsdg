<mat-toolbar color="primary">
  <img src="../assets/colony-unsdg.png" alt="Colony UNSDG" style="width:20%; margin-left: -16px;">
  <span class="example-spacer"></span>
  <button mat-icon-button (click)="openBottomSheet()">
    <mat-icon aria-label="Meta">notes</mat-icon>
  </button>
  <a mat-icon-button href="https://github.com/fuguefoundation/truffle-colony-unsdg" target="_blank">
    <mat-icon aria-label="Github">code</mat-icon>
  </a>
</mat-toolbar>

<mat-horizontal-stepper [linear]="isLinear" #stepper>
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Create Token</ng-template>
      <mat-card>
        <!-- <mat-card-header>Create Token <span *ngIf="model.token.name">: {{model.token.name}} {{model.token.symbol}}</span></mat-card-header> -->
        <mat-card-content>
          <mat-form-field>
            <input matInput placeholder="Token Name" #tokenName formControlName="firstCtrl">
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Token Symbol" #tokenSymbol formControlName="firstCtrl">
          </mat-form-field>
          <div>
            <button mat-raised-button color="primary" matStepperNext (click)="token(tokenName.value, tokenSymbol.value)">Create Token</button>
          </div>
        </mat-card-content>
      </mat-card>
    </form>
  </mat-step>
  <mat-step [stepControl]="secondFormGroup">
    <form [formGroup]="secondFormGroup">
      <ng-template matStepLabel>Create Colony</ng-template>
      <mat-card>
        <!-- <mat-card-header>Create Colony and Get Colony Cient</mat-card-header> -->
        <mat-card-content>
          <mat-form-field class="long-input-field">
            <input matInput placeholder="Token Address" value="{{model.token.address}}" #tokenAddress formControlName="secondCtrl">
          </mat-form-field>
          <div>
            <button mat-raised-button color="accent" matStepperPrevious>Back</button>
            <button mat-raised-button color="primary" matStepperNext color="primary" (click)="createColony(tokenAddress.value)">Create Colony</button>
          </div>          
        </mat-card-content>
      </mat-card>
    </form>
  </mat-step>
  <mat-step [stepControl]="thirdFormGroup">
    <form [formGroup]="thirdFormGroup">
      <ng-template matStepLabel>Add Domain</ng-template>
      <mat-card >
            <mat-card-header>
                <div mat-card-avatar class="goals-header-image"></div>
                <mat-card-title>{{selectedDomain.name}}</mat-card-title>
                <mat-card-subtitle>{{selectedDomain.desc}}</mat-card-subtitle>
            </mat-card-header>
        </mat-card>
      <div>
        <button mat-raised-button color="accent" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext (click)="addDomain()">Add Domain</button>
      </div>
    </form>
    <app-domains></app-domains>
  </mat-step>
  <mat-step [stepControl]="fourthFormGroup">
    <form [formGroup]="fourthFormGroup">
      <ng-template matStepLabel>Create Task</ng-template>
      <mat-card>
            <mat-card-header>
                <div mat-card-avatar class="goals-header-image"></div>
                <mat-card-title>{{selectedDomain.name}}</mat-card-title>
                <mat-card-subtitle>{{selectedDomain.desc}}</mat-card-subtitle>
            </mat-card-header>          
        <!-- <mat-card-header>Create Task <span *ngIf="model.task.title">: {{model.task.title}} {{model.task.desc}}</span></mat-card-header> -->
        <mat-card-content>
          <mat-form-field>
            <input matInput placeholder="Task Title" value="{{model.task.title}}" formControlName="fourthCtrl" #taskTitle>
          </mat-form-field>
          <mat-form-field style="width:800px;">
            <textarea matInput placeholder="Task Description" value="{{model.task.desc}}" formControlName="fourthCtrl" #taskDesc></textarea>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Domain ID" value="{{model.domain.id}}" formControlName="fourthCtrl" #domainId>
          </mat-form-field>
          <div>
            <button mat-raised-button color="accent" matStepperPrevious>Back</button>
            <button mat-raised-button color="primary" matStepperNext (click)="createTask(taskTitle.value, taskDesc.value, domainId.value)">Create Task</button>
          </div>
        </mat-card-content>
      </mat-card>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <div class="row">
        <div class="col-6">
            <mat-card style="max-width: 50%;">
                <mat-card-header>
                    <div mat-card-avatar class="goals-header-image"></div>
                    <mat-card-title>{{selectedDomain.name}}</mat-card-title>
                    <!-- <mat-card-subtitle>{{goal.desc}}</mat-card-subtitle> -->
                </mat-card-header>
                <img mat-card-image src="{{selectedDomain.img}}" alt="{{selectedDomain.name}}">
                <mat-card-content>
                    <p>
                    {{selectedDomain.desc}}
                    </p>
                </mat-card-content>
                <mat-card-actions>
                    <a mat-raised-button href="{{selectedDomain.link}}" target="_blank">More Info</a>
                </mat-card-actions>
            </mat-card>
        </div>
        <div class="col-6">
            <mat-card *ngIf="model.taskObject">
                <mat-card-header>
                    <div mat-card-avatar class="goals-header-image"></div>
                    <mat-card-title>{{model.task.title}}</mat-card-title>
                    <!-- <mat-card-subtitle>{{goal.desc}}</mat-card-subtitle> -->
                </mat-card-header>
                <mat-card-content>
                    <mat-list>
                        <mat-list-item>
                            <strong>Due Date</strong>: {{model.taskObject.dueDate | date}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Completion Date</strong>: {{model.taskObject.completionDate}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Status</strong>: {{model.taskObject.status}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>ID</strong>: {{model.taskObject.id}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Pot ID</strong>: {{model.taskObject.potId}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Skill ID</strong>: {{model.taskObject.skillId}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Payments Cannot Make</strong>: {{model.taskObject.paymentsWeCannotMake}}
                        </mat-list-item>                        
                        <mat-list-item>
                            <strong>Specification Hash</strong>: {{model.taskObject.specificationHash}}
                        </mat-list-item>
                        <mat-list-item>
                            <strong>Deliverable Hash</strong>: {{model.taskObject.deliverableHash}}
                        </mat-list-item>
                    </mat-list>   
                </mat-card-content>
            </mat-card>
        </div>
    </div><!-- end row -->
    <div>
      <button mat-raised-button color="accent" matStepperPrevious>Back</button>
      <button mat-raised-button color="primary" (click)="stepper.reset()">Reset</button>
    </div>
  </mat-step>
</mat-horizontal-stepper>

<app-tx></app-tx>
<!-- <button mat-raised-button (click)="openBottomSheet()">Meta</button> -->
